!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Signature=e()}(this||window,function(){function t(t,e,s,i){t.addEventListener(e,s,i||!1)}function e(t,e,s){t.removeEventListener(e,s)}function s(t){for(var e=t.offsetLeft,s=t.offsetTop,i=t.offsetParent;null!=i;)e+=i.offsetLeft,s+=i.offsetTop,i=i.offsetParent;return{left:e,top:s}}var i=function(t){var e,i,o,n;if(!t)throw new Error("参数不能为空");if(t.el instanceof HTMLCanvasElement)e=t.el;else if("string"==typeof t.el){var c=t.el.match(/^[.|#]/);if(!c)throw new Error("请传入正确的参数!");switch(c[0]){case".":e=document.getElementsByClassName(t.el.substr(1))[0];break;case"#":e=document.getElementById(t.el.substr(1))}}t.cap=t.cap||"round",t.lineJoin=t.lineJoin||"round",t.color=t.color||"#000",t.width=t.width||5,t.offsetX=t.offsetX||0,t.offsetY=t.offsetY||0,this.opts=t,(i=e.getContext("2d")).strokeStyle=this.opts.color,i.lineWidth=this.opts.width,i.lineCap=this.opts.cap,i.lineJoin=this.opts.lineJoin,o=s(e).left,n=s(e).top,this.disLeft=o,this.disTop=n,this.canvas=e,this.cxt=i,this._lock=!1,this.bindEvent(this.canvas)},o=i.prototype;return o.setColor=function(t){if("string"!=typeof t)throw new Error("参数须为字符串");this.cxt.strokeStyle=t},o.setWidth=function(t){if("number"!=typeof t)throw new Error("参数须为数字");this.cxt.lineWidth=t},o.destroy=function(){e(this.canvas,"touchstart",this),e(this.canvas,"touchmove",this),e(this.canvas,"touchend",this),e(this.canvas,"touchcancel",this)},o.lock=function(){this._lock=!0},o.unlock=function(){this._lock=!1},o.bindEvent=function(e){t(e,"touchstart",this,!1),t(e,"touchmove",this,!1),t(e,"touchend",this,!1),t(e,"touchcancel",this,!1)},o.handleEvent=function(t){var e=window.event||t;switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":case"touchcancel":this.end(e)}},o.start=function(t){if(this._lock)return!1;var e=t.touches[0],s={x:e.clientX-this.disLeft+this.opts.offsetX,y:e.clientY-this.disTop+this.opts.offsetY};this.cxt.beginPath(),this.cxt.moveTo(s.x,s.y)},o.move=function(t){if(this._lock)return!1;var e=t.touches[0],s={x:e.clientX-this.disLeft+this.opts.offsetX,y:e.clientY-this.disTop+this.opts.offsetY};this.cxt.lineTo(s.x,s.y),this.cxt.stroke(),this.cxt.beginPath(),this.cxt.moveTo(s.x,s.y)},o.end=function(t){if(this._lock)return!1;var e=t.changedTouches[0],s={x:e.clientX-this.disLeft+this.opts.offsetX,y:e.clientY-this.disTop+this.opts.offsetY};this.cxt.lineTo(s.x,s.y),this.cxt.stroke()},o.clear=function(){this.cxt.clearRect(0,0,this.canvas.width,this.canvas.height)},i});